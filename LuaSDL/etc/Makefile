# =============================================================================
#
# Simple Makefile
# PUBLIC DOMAIN 2007 Kein-Hong Man <khman@users.sf.net>
#
# =============================================================================

CP = cp
CC = gcc
EXE = .exe
SO = .dll

AR_D = $(CC) -shared -o
RANLIB_D = strip --strip-unneeded

MYCFLAGS = -g -O2 -Wall
#MYCFLAGS = -g -O2 -Wall -DNDEBUG

MYLDFLAGS =

# ======================================================================
# specifications and paths
# ======================================================================

CFLAGS = $(MYCFLAGS) $(shell sdl-config --cflags)
LDFLAGS = $(MYLDFLAGS)

# ======================================================================
# names
# ======================================================================

BIN2C = bin2c
DUM_TTF = SDL_ttf-dummy
DUM_MIX = SDL_mixer-dummy

PROGRAMS = $(BIN2C)$(EXE) $(DUM_TTF)$(SO) $(DUM_MIX)$(SO)

# ======================================================================
# default
# ======================================================================

all: $(PROGRAMS)

# ======================================================================
# dependencies
# ======================================================================

# ======================================================================
# executables
# ======================================================================

$(BIN2C)$(EXE): $(BIN2C).o
	$(CC) -o $@ $(BIN2C).o $(LDFLAGS)

$(DUM_TTF)$(SO): $(DUM_TTF).o
	$(AR_D) $@ $?
	$(RANLIB_D) $@

$(DUM_MIX)$(SO): $(DUM_MIX).o
	$(AR_D) $@ $?
	$(RANLIB_D) $@

# ======================================================================
# maintenance
# ======================================================================

clean:
	rm -f $(PROGRAMS) *.o

.PHONY: all clean

# ======================================================================
# (end of Makefile)
